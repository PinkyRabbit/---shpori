# Модель рабочего пространства GitFlow
Репозиторий обязан иметь **две** основные ветки:
1. **Master** - наиболее стабильная ветвь, которая всегда находится в состоянии "готов к запуску", содержит самую последнюю **рабочую** версию
2. **Develop** - производная от _master_. Ветка для разработки, которая служит для интегрирования различных фич, которые планируются в будующем релизе. Эта ветвь может быть не такой стабильной, как ветка _master_. Это место, где все разработчики взаимодействуют друг с другом, раскидывая наработки по другим веткам.
С этих двух веток начинается проект. Они **обе должны быть защищены** против внезапного удаления. Поэтому только лидер проекта должен иметь доступ их мержить.

> Важно заметить! Постоянно держите глаз на том, что кодим мы только или в ветке develop, или в её детях!! В Мастере мы не кодим!!!

Кроме этого, у нормального рабочего пространства могут быть следующие ветки:
* **Feature** - ветвится от ветки _develop_ и служит для различных фич.
* **Release** - так же ветвится от ветки _develop_, но служит для релизов.
* **Hotfix** - ветвится от ветки _master_ и служит для быстрого исправления багов, обнаруженных при выпуске новой версии.

### Запуск GitFlow
Ссылка на [GitFlow](https://github.com/nvie/gitflow). Если надо, там полно инструкций по установке.

Организуем проект GitFlow в три шага:
1. Клонируем репозиторий нашего проекта или что-то такое
2. Переходим в папку с проектом
3. Инициализируем flow с помощью команды `git flow init`

После этого выскочат парочку вопросиков, там всё понятно.

### Ветви _master_ и _develop_
После активации flow наши ветви пропадают. Нужно их создать заново и запушить в репозиторий.

Для того, чтобы переключиться на ветку _master_ нужно сделать
```
git checkout master
```
После переключения можно её запушить
```
git push -u origin master
```
То же самое и с веткой _develop_. Пока что она только лишь на локальном репозитории на компе.
```
git checkout develop
git push origin develop
```
Теперь у нас репозиторий с обеими ветками. Стоит заметить, что это разумно, если начинать проект "с нуля". Если у вас уже много кода - достаточно и одной ветки _master_.

### Ветка Feature
По-умолчанию имя ветки (или веток) с фичами начинается на `feature`. Суть в том, что тут девелоперы взаимодействуют над конкретными задачами. Обычно это что-то небольшое, что можно уместить в слово "модуль". В отдельную ветку фичи складываются потому, что, часто бывает такое, что фичи оказываются нецелесообразными и отбрасываются, или же, банально, не своевременными, и тормозят развитие проекта. Поэтому их откладывают и берутся за новую фичу. Жизненный цикл ветки с фичей заканчивается, когда эта фича вливается в ветку _develop_ (то есть, мержится с ней).

#### Пример:
Начинаем ветку с фичей. Назовём её `feature1`

```
git flow feature start feature1
```
Всё, фича существует! Но только на нашем компе. Это значит, что пока мы не мешаем никому вообще. Мы спокойно себе кодим до результата. Как только фича готова - делаем коммит и можем запушить её в основной репозиторий.

Проверяем статус и коммитим:
```
git status
git add .
git commit -am "Your message"
```
Публикуем нашу фичу на GitHub.com
```
git flow publish feature1
git push
```
Если проверите репозиторий, то обнаружите ветку `feature/feature1`. Всё потому что gitflow добавил feature автоматом.
> Если над фичей будет работать несколько человек, смысл остаётся такой же, но, при этом, кто-то из них создаёт пустую ветку под фичу, чтобы остальные могли её скачать. В остальном, работа как обычно. Чтобы подключиться к уже созданной фиче используется команда `git flow feature track feature1`

Как код был проверен, а фича - одобрена, её сливают с веткой _develop_. При этом ветка с фичей автоматом разрушается на GitHub.
```
git flow finish feature1
```
Если уж очень хочется вернуться в прошлое - можно удалить ветку c помощью команды `git branch -d feature/feature1`. Такой же принцип работы и у `bugfix`.

#### Чужой репозиторий
> Сперва проверьте, есть ли ветка `develop` на чужом репозитории

Если репозиторий чужой, прежде чем создавать пространство под фичи, нужно его клонировать и инициализировать флоу:
```
git clone https://github.com/bharatdwarkani/gitflow-example.git
cd gitflow-example
git checkout develop
git flow init
```
